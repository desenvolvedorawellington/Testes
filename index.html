<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assistente BMG - Serop√©dica</title>
  <style>
    :root {
      --laranja: #ff6600;
      --azul-verificado: #0075ff;
      --cinza: #f4f4f4;
      --preto: #1a1a1a;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      background: var(--cinza);
      padding: 1rem;
      display: flex;
      align-items: center;
      border-bottom: 2px solid var(--laranja);
    }

    header img {
      height: 60px;
      width: 60px;
      margin-right: 10px;
      border-radius: 16px;
      object-fit: cover;
    }

    header span {
      font-weight: bold;
      font-size: 1rem;
      color: var(--preto);
    }

    .chat-box {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
    }

    .message {
      max-width: 80%;
      padding: 0.8rem;
      border-radius: 12px;
      margin-bottom: 0.5rem;
      animation: fadeIn 0.3s ease;
      line-height: 1.5;
    }

    .bot {
      background: var(--cinza);
      align-self: flex-start;
    }

    .user {
      background: var(--laranja);
      color: white;
      align-self: flex-end;
    }

    .typing {
      font-style: italic;
      opacity: 0.6;
      padding: 0.6rem 1rem;
      background: #eee;
      border-radius: 10px;
      width: fit-content;
      animation: blink 1s infinite;
      margin-bottom: 1rem;
    }

    @keyframes blink {
      0% { opacity: 0.6; }
      50% { opacity: 1; }
      100% { opacity: 0.6; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .input-area {
      display: flex;
      padding: 0.8rem;
      border-top: 1px solid #ddd;
      background: white;
    }

    .input-area input {
      flex: 1;
      padding: 1rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 10px;
      outline: none;
    }

    .input-area button {
      margin-left: 0.5rem;
      background: var(--laranja);
      border: none;
      color: white;
      padding: 0.9rem 1.2rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }

    form {
      margin-top: 1rem;
      text-align: center;
    }

    form button {
      background: #0075ff;
      color: white;
      padding: 0.9rem 1.4rem;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 1rem;
    }

    footer {
      text-align: center;
      font-size: 0.85rem;
      color: #444;
      padding: 1rem;
      background: #f9f9f9;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo-bmg.png" alt="BMG Logo">
    <span>üîí Atendimento virtual Banco BMG</span>
  </header>

  <div class="chat-box" id="chat">
    <div class="message bot">üëã Ol√°! Sou a Assistente BMG, atendimento digital da nossa unidade em Serop√©dica.<br>Para come√ßar, qual o seu nome completo?</div>
  </div>

  <div class="input-area">
    <input type="text" id="userInput" placeholder="Digite aqui..." />
    <button onclick="sendMessage()">Enviar</button>
  </div>

  <footer>
    üìç Av. Ministro Fernando Costa, 744 Lj. B ‚Äì Km 49, Serop√©dica/RJ<br>
    üìû (21) 2682-8618
  </footer>

  <script>
    const chat = document.getElementById('chat');
    const input = document.getElementById('userInput');
    let etapa = 0;
    let nome = '';
    let opcao = '';
    let respostaFinal = '';

    function sendMessage() {
      const texto = input.value.trim();
      if (!texto) return;

      appendMessage(texto, 'user');
      input.value = '';
      setTimeout(() => showTyping(() => responder(texto)), 300);
    }

    function appendMessage(texto, tipo) {
      const msg = document.createElement('div');
      msg.className = 'message ' + tipo;
      msg.innerHTML = texto;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    function showTyping(callback) {
      const typing = document.createElement('div');
      typing.className = 'typing';
      typing.innerText = 'Digitando...';
      chat.appendChild(typing);
      chat.scrollTop = chat.scrollHeight;

      setTimeout(() => {
        typing.remove();
        callback();
      }, 1000);
    }

    function responder(texto) {
      if (etapa === 0) {
        nome = texto;
        appendMessage(`Muito prazer, ${nome}! Em que posso te ajudar hoje? Digite o n√∫mero da op√ß√£o:<br><br>
        1Ô∏è‚É£ Empr√©stimo Consignado<br>
        2Ô∏è‚É£ Cart√£o BMG<br>
        3Ô∏è‚É£ Portabilidade<br>
        4Ô∏è‚É£ Impress√£o de Fatura / Extrato<br>
        5Ô∏è‚É£ D√∫vida ou Reclama√ß√£o<br>
        6Ô∏è‚É£ Outros assuntos`, 'bot');
        etapa = 1;

      } else if (etapa === 1) {
        opcao = texto;
        etapa = 2;

        switch (texto) {
          case '1':
            respostaFinal = `${nome} deseja informa√ß√µes sobre Empr√©stimo Consignado.`;
            appendMessage(`${nome}, voc√™ j√° possui um empr√©stimo ativo? Informe tamb√©m seu CPF para consulta.`, 'bot');
            break;
          case '2':
            respostaFinal = `${nome} deseja solicitar um novo Cart√£o BMG ou tem d√∫vidas sobre fatura.`;
            appendMessage(`${nome}, deseja solicitar um novo Cart√£o BMG ou tem d√∫vidas sobre fatura/extrato? Informe tamb√©m seu CPF.`, 'bot');
            break;
          case '3':
            respostaFinal = `${nome} quer fazer portabilidade de banco.`;
            appendMessage(`${nome}, qual banco voc√™ deseja trazer sua portabilidade? Informe tamb√©m seu CPF.`, 'bot');
            break;
          case '4':
            respostaFinal = `${nome} deseja imprimir fatura ou extrato.`;
            appendMessage(`Voc√™ quer imprimir a fatura do cart√£o ou extrato do INSS? Informe seu CPF.`, 'bot');
            break;
          case '5':
            respostaFinal = `${nome} tem uma d√∫vida ou reclama√ß√£o.`;
            appendMessage(`Descreva sua d√∫vida ou problema, por favor. Inclua seu CPF se necess√°rio.`, 'bot');
            break;
          case '6':
            respostaFinal = `${nome} deseja tratar de outro assunto.`;
            appendMessage(`Pode digitar o assunto que deseja tratar. Informe seu CPF para identifica√ß√£o.`, 'bot');
            break;
          default:
            appendMessage(`Op√ß√£o inv√°lida. Digite um n√∫mero de 1 a 6.`, 'bot');
            etapa = 1;
        }

      } else if (etapa === 2) {
        respostaFinal += ` Detalhes adicionais: ${texto}`;
        appendMessage(`Obrigado, ${nome}! Agora clique abaixo para enviar seu atendimento para a equipe:`, 'bot');
        showFormSubmit();
        etapa = 3;
      }
    }

    function showFormSubmit() {
      const form = document.createElement('form');
      form.action = "https://formsubmit.co/el/cujimo";
      form.method = "POST";

      form.innerHTML = `
        <input type="hidden" name="Nome" value="${nome}">
        <input type="hidden" name="Op√ß√£o" value="${opcao}">
        <input type="hidden" name="Detalhes" value="${respostaFinal}">
        <button type="submit">üì© Enviar para a equipe</button>
      `;

      chat.appendChild(form);
      chat.scrollTop = chat.scrollHeight;
    }
  </script>
</body>
</html>
